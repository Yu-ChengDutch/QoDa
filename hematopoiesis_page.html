<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="style.css" />

</head>
<body>

    <a style="display:blcok" href="./development_and_growth.html">
        <div class="main-card">
            <h4><b>Hematopoiesis</b></h4>
        </div>
    </a>

    <div class="card">

        <h4>Check</h4>

        <input type="text" placeholders="Type here" id="inputId" class="inputClass" onkeypress="clickPress(event);">

        <h4>Check</h4>

    </div>

    <div id="placeholder">

    </div>
    
    <script>
        function clickPress(event) {
            let inputVal = document.getElementsByClassName("inputClass")[0].value;

            let card = document.getElementById('testCard');
            
            if (event.key == "Enter") {

                var div = document.createElement('div');

                div.innerHTML = `
                    <div class="card">
                        <h4>${inputVal}</h4>
                    </div>
                `;

                alert(document.body.childNodes.length);

                document.body.insertBefore(div, document.getElementById("placeholder"))

            }
        };
    </script>

    <div class="card" id="testCard">
    </div>

    <script>
        console.log("Accessing JS")

        card = document.getElementById('testCard');

        fetch('./hematopoiesis.json')
            .then(function (response) {
                console.log("File found and accessed")
                return response.json();
            })
            .then(function (data) {
                console.log(data)

                let html_insert = "<h4>" + data["Name"] + "<h4>";

                card.innerHTML += html_insert;

                card.addEventListener("click", addCards.bind(null, data["Subsequent cells"]));

            })
            .catch(function (err) {
                console.log('error: ' + err);
            });

        function addCards(listOfThings) {
            console.log(listOfThings);
            for (key in Object.keys(listOfThings)) {
                thing = listOfThings[key]
                console.log()
                console.log(thing["Name"]);
                var div = document.createElement('div');
                var name = thing["Name"];

                div.innerHTML = `
                    <div class="card">
                        <h4>${name}</h4>
                    </div>
                `;

                document.body.insertBefore(div, document.body.childNodes[0])
            }
        }

    </script>
</body>
</html>